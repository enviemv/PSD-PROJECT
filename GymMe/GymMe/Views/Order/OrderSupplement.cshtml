@model GymMe.Models.OrderSupplementListViewModel

@{
    ViewData["Title"] = "Order Supplements";
}

<h2>Order Supplements</h2>

<form asp-action="OrderSupplement" method="post">
    <div>
        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Expiry Date</th>
                    <th>Price</th>
                    <th>Type</th>
                    <th>Quantity</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var supplement in Model.Supplements)
                {
                    <tr>
                        <td>@supplement.SupplementName</td>
                        <td>@supplement.SupplementExpiryDate.ToShortDateString()</td>
                        <td>@supplement.SupplementPrice</td>
                        <td>@supplement.SupplementTypeName</td>
                        <td>
                            <input asp-for="@Model.Supplements[@Model.Supplements.IndexOf(supplement)].Quantity" class="form-control" />
                            <span asp-validation-for="@Model.Supplements[@Model.Supplements.IndexOf(supplement)].Quantity" class="text-danger"></span>
                        </td>
                        <td>
                            <button type="submit" name="CartAction" value="Add-@supplement.SupplementID" class="btn btn-primary">Add to Cart</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div>
        <button type="submit" name="CartAction" value="ClearCart" class="btn btn-warning">Clear Cart</button>
        <button type="submit" name="CartAction" value="Checkout" class="btn btn-success">Checkout</button>
    </div>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
